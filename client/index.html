<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no, viewport-fit=cover"
    />
    <title>focusWalker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://a.basemaps.cartocdn.com" crossorigin />
    <link rel="preconnect" href="https://b.basemaps.cartocdn.com" crossorigin />
    <link rel="preconnect" href="https://c.basemaps.cartocdn.com" crossorigin />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playpen+Sans+Thai:wght@100..800&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@1,400&family=Playpen+Sans+Thai:wght@300;600&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      crossorigin
      media="print"
      onload="this.media='all'"
    />

    <link rel="manifest" href="/manifest.json" />

    <style>
      :root {
        /* Use the exact names from your index.css */
        --bg-page: #ffffff;
        --text-primary: #0f172a;
        --accent-primary: #658c00; /* Day green */
        --hud-bg: rgba(255, 255, 255, 0.85);
        --hud-border: rgba(15, 23, 42, 0.08);
      }

      :root.dark {
        --bg-page: #050505;
        --text-primary: #ffffff;
        --accent-primary: #bfff04; /* Tactical neon */
        --hud-bg: rgba(10, 10, 12, 0.9);
        --hud-border: rgba(191, 255, 4, 0.12);
      }

      /* Update your base styles to use these new names */
      body,
      html {
        background: var(--bg-page);
        color: var(--text-primary);
        /* ... rest of your styles ... */
      }

      #loading-overlay {
        position: fixed;
        inset: 0;
        background: var(--bg-page);
        /* The "Magic Trio" for centering */
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;

        z-index: 9999;
        transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .splash-logo {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
      }

      .logo-text {
        color: var(--text-primary);
        font-size: clamp(24px, 8vw, 42px); /* Slightly larger for impact */
        font-weight: 900;
        font-family: var(--font-sans);
        letter-spacing: -0.05em;
        text-transform: uppercase;
        margin: 0; /* Remove default margins that might push it off-center */
      }

      .logo-text::after {
        content: "";
        display: block;
        width: 100%; /* Make the neon bar match the text width */
        height: 4px;
        background: var(--accent-primary);
        margin: 8px auto 0;
        box-shadow: 0 0 20px var(--accent-primary);
      }
      .scanner {
        background: var(--accent-primary);
      }
    </style>
  </head>
  <body>
    <script>
      (function () {
        const theme =
          localStorage.getItem("theme") ||
          (window.matchMedia("(prefers-color-scheme: dark)").matches
            ? "dark"
            : "light");
        document.documentElement.classList.add(theme);
      })();
    </script>

    <div id="loading-overlay">
      <div class="scanner"></div>
      <div class="splash-logo">
        <div class="logo-text">focusWalker</div>
      </div>
      <div id="shell">
        <div class="top-hud-skeleton skeleton"></div>
        <div class="bottom-card-skeleton skeleton"></div>
      </div>
    </div>

    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>

    <script>
      window.addEventListener("load", () => {
        const overlay = document.getElementById("loading-overlay");
        if (overlay) {
          overlay.style.opacity = "0";
          setTimeout(() => overlay.remove(), 1500);
        }
      });
    </script>
  </body>
</html>
